# 모바일 청첩장 관리자 페이지 정책서

## 1. 목적
이 정책서는 기존 청첩장 UI/UX를 변경하지 않고, 관리자 페이지에서 콘텐츠를 안전하게 관리하기 위한 운영 기준을 정의한다.

## 2. 적용 범위
관리자 페이지에서 제어 가능한 항목은 아래와 같다.
1. 히어로 이미지/비디오 교체
2. 신랑/신부 이름 입력 및 변경
3. 결혼식 날짜/시간 문구 변경
4. 예식 장소/주소/지도 링크 변경
5. 섹션별 이미지 추가/삭제/변경
6. 갤러리 이미지 추가/삭제/순서변경/변경
7. 안내 문구 타이틀/설명 입력/수정
8. 계좌번호 입력/수정/삭제

## 3. 운영 원칙
1. 메인 청첩장 화면의 레이아웃/스타일은 변경하지 않는다.
2. 콘텐츠 변경은 관리자 데이터 저장소를 통해서만 반영한다.
3. 저장 전 임시 편집 상태와 저장 후 배포 상태를 구분한다.
4. 실패 시 즉시 이전 정상 상태로 복구 가능해야 한다.

## 4. 데이터 정책
1. 단일 소스: `data/wedding-content.json`
2. 스키마 타입: `lib/content/types.ts`를 기준으로 검증한다.
3. 필수값 누락 방지:
- 이름, 날짜, 장소, 주요 이미지/비디오 경로는 빈값 저장을 차단한다.
4. 정렬 보장:
- 갤러리/섹션 리스트는 배열 순서를 렌더링 순서로 사용한다.
5. 파일 경로 정책:
- 업로드 파일은 `public/uploads/<category>/...`에 저장한다.

## 5. 보안 정책
1. 관리자 페이지는 인증 없이 외부 노출하지 않는다.
2. 업로드 허용 확장자만 저장한다.
- 이미지: jpg, jpeg, png, webp, gif
- 비디오: mp4, mov, webm
3. 파일명은 서버에서 정제/재생성한다.
4. 실행 스크립트/문서 파일 업로드는 금지한다.

## 6. 변경/검수 정책
1. 저장 전 검수:
- 경로 유효성
- 필수 텍스트 존재
- 리스트 최소 개수(히어로/갤러리)
2. 저장 후 검수:
- 메인 페이지
- 갤러리 페이지
- 라이트박스 페이지
3. 릴리즈 체크:
- `npm run lint` 통과 필수
- 빌드는 네트워크 제약 없는 환경에서 최종 검증

## 7. 장애 대응 정책
1. 콘텐츠 저장 실패 시 사용자에게 실패 메시지 표시
2. 업로드 실패 시 해당 입력만 롤백
3. JSON 파손 시 기본값 복구 + 로그 기록
4. 치명적 오류 시 직전 백업 파일로 즉시 복원

## 8. 순차 작업 계획
1단계. 정책 확정
- 본 문서 승인

2단계. 데이터 모델 고정
- 타입/기본값/저장소 구조 확정

3단계. 관리자 API 고정
- 콘텐츠 조회/저장 API
- 업로드 API

4단계. 관리자 UI 고정
- 항목별 편집/추가/삭제/순서변경

5단계. 메인 연동 고정
- 메인/갤러리/라이트박스/공유 문구 연동

6단계. 검수 및 인수
- 운영 체크리스트 점검
- 최종 수정사항 반영

## 9. 승인 기준
아래 조건 충족 시 정책 준수로 본다.
1. UI 변경 없이 콘텐츠만 관리 가능
2. 요청한 8개 관리 항목 모두 동작
3. 저장 후 실시간 반영 확인
4. 린트 오류 없음
